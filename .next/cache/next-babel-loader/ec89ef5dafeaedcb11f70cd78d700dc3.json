{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/intermezzto/Documentos/codeProyects/mapbox-project/components/heatMap/index.js\";\nimport { useEffect, useState } from 'react';\nimport mapboxgl from 'mapbox-gl/dist/mapbox-gl.js';\nmapboxgl.accessToken = process.env.MAPBOX_TOKEN;\n\nconst heatMap = props => {\n  const {\n    container,\n    // 'componentMap'\n    withContainer,\n    // with style prop\n    heigthContainer,\n    // heigth style prop\n    styleMap,\n    // 'mapbox://styles/mapbox/dark-v10'\n    center,\n    // [-79.999732, 40.4374]\n    zoom,\n    // 11\n    addSourceName,\n    // 'trees'\n    typeSource,\n    // 'geojson'\n    dataSource,\n    // data\n    propertyLayer,\n    // 'dbh' (the name of property on geojson)\n    typeLayer,\n    // 'exponential'\n    colorOne,\n    colorTwo,\n    colorThree,\n    colorFour,\n    colorFive,\n    colorSix,\n    colorSeven,\n    backgroundImgPopUp,\n    htmlPopUp\n  } = props.dataMap;\n  const {\n    0: pageIsMounted,\n    1: setPageIsMounted\n  } = useState(false);\n  useEffect(() => {\n    setPageIsMounted(true);\n    const map = new mapboxgl.Map({\n      // Html container for the map\n      container: container,\n      style: styleMap,\n      center: center,\n      zoom: zoom\n    });\n    map.on('load', function () {\n      // data source added here\n      map.addSource(addSourceName, {\n        type: typeSource,\n        data: dataSource\n      }); // add heatmap layer here\n\n      map.addLayer({\n        id: `${addSourceName}-heat`,\n        type: 'heatmap',\n        source: addSourceName,\n        maxzoom: 15,\n        paint: {\n          // increase weight as diameter breast height increases\n          'heatmap-weight': {\n            property: propertyLayer,\n            type: typeLayer,\n            stops: [[1, 0], [62, 1]]\n          },\n          // assign color values be applied to points depending on their density\n          'heatmap-color': ['interpolate', ['linear'], ['heatmap-density'], 0, colorSeven, 0.2, colorFive, 0.4, colorFour, 0.6, colorThree, 0.8, colorOne],\n          // increase radius as zoom increases\n          'heatmap-radius': {\n            stops: [[11, 15], [15, 20]]\n          },\n          'heatmap-opacity': {\n            default: 1,\n            stops: [[14, 1], [15, 0]]\n          }\n        }\n      }, 'waterway-label'); //add circle layer here  \n\n      map.addLayer({\n        id: `${addSourceName}-point`,\n        type: 'circle',\n        source: addSourceName,\n        minzoom: 14,\n        paint: {\n          // increase the radius of the circle as the zoom level and dbh value increases\n          'circle-radius': {\n            property: propertyLayer,\n            type: typeLayer,\n            stops: [[{\n              zoom: 15,\n              value: 1\n            }, 5], [{\n              zoom: 15,\n              value: 62\n            }, 10], [{\n              zoom: 22,\n              value: 1\n            }, 20], [{\n              zoom: 22,\n              value: 62\n            }, 50]]\n          },\n          'circle-color': {\n            property: propertyLayer,\n            type: typeLayer,\n            stops: [[0, colorSeven], [10, colorSix], [20, colorFive], [30, colorFour], [40, colorThree], [50, colorTwo], [60, colorOne]]\n          },\n          'circle-stroke-color': 'white',\n          'circle-stroke-width': 1,\n          'circle-opacity': {\n            stops: [[14, 0], [15, 1]]\n          }\n        }\n      }, 'waterway-label');\n      map.on('click', `${addSourceName}-point`, function (e) {\n        new mapboxgl.Popup().setLngLat(e.features[0].geometry.coordinates).setHTML(`\n          <div className=\"popup__container\" style=\"background-image: url(${backgroundImgPopUp});\">\n            ${htmlPopUp}\n          </div>\n          `) // .setHTML('<br><b>Diameter:</b> ' + e.features[0].properties.dbh)\n        .addTo(map);\n      });\n    });\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: `${withContainer}%`,\n      height: `${heigthContainer}vh`\n    },\n    id: container\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this);\n};\n\nexport default heatMap;","map":{"version":3,"sources":["/home/intermezzto/Documentos/codeProyects/mapbox-project/components/heatMap/index.js"],"names":["useEffect","useState","mapboxgl","accessToken","process","env","MAPBOX_TOKEN","heatMap","props","container","withContainer","heigthContainer","styleMap","center","zoom","addSourceName","typeSource","dataSource","propertyLayer","typeLayer","colorOne","colorTwo","colorThree","colorFour","colorFive","colorSix","colorSeven","backgroundImgPopUp","htmlPopUp","dataMap","pageIsMounted","setPageIsMounted","map","Map","style","on","addSource","type","data","addLayer","id","source","maxzoom","paint","property","stops","default","minzoom","value","e","Popup","setLngLat","features","geometry","coordinates","setHTML","addTo","width","height"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react'\nimport mapboxgl from 'mapbox-gl/dist/mapbox-gl.js'\nmapboxgl.accessToken = process.env.MAPBOX_TOKEN;\n\nconst heatMap = (props) => {\n  const {\n    container, // 'componentMap'\n    withContainer, // with style prop\n    heigthContainer, // heigth style prop\n    styleMap, // 'mapbox://styles/mapbox/dark-v10'\n    center, // [-79.999732, 40.4374]\n    zoom,  // 11\n    addSourceName, // 'trees'\n    typeSource, // 'geojson'\n    dataSource, // data\n    propertyLayer, // 'dbh' (the name of property on geojson)\n    typeLayer, // 'exponential'\n    colorOne,\n    colorTwo,\n    colorThree,\n    colorFour, \n    colorFive, \n    colorSix,\n    colorSeven,\n    backgroundImgPopUp,\n    htmlPopUp\n  } = props.dataMap\n\n  const [pageIsMounted, setPageIsMounted] = useState(false)\n\n  useEffect(() => { \n    setPageIsMounted(true)\n    const map = new mapboxgl.Map({\n      // Html container for the map\n      container: container,\n      style: styleMap,\n      center: center,\n      zoom: zoom\n    });\n\n    map.on('load', function() {\n          // data source added here\n      map.addSource(addSourceName, {\n        type: typeSource,\n        data: dataSource\n      })\n\n      // add heatmap layer here\n      map.addLayer({\n        id: `${addSourceName}-heat`,\n        type: 'heatmap',\n        source: addSourceName,\n        maxzoom: 15,\n        paint: {\n          // increase weight as diameter breast height increases\n          'heatmap-weight': {\n            property: propertyLayer,\n            type: typeLayer,\n            stops: [\n              [1, 0],\n              [62, 1]\n            ]\n          },\n          // assign color values be applied to points depending on their density\n          'heatmap-color': [\n            'interpolate',\n            ['linear'],\n            ['heatmap-density'],\n            0, colorSeven,\n            0.2, colorFive,\n            0.4, colorFour,\n            0.6, colorThree,\n            0.8, colorOne\n          ],\n          // increase radius as zoom increases\n          'heatmap-radius': {\n            stops: [\n              [11, 15],\n              [15, 20]\n            ]\n          },\n          'heatmap-opacity': {\n            default: 1,\n            stops: [\n              [14, 1],\n              [15, 0]\n            ]\n          },\n        }\n      }, 'waterway-label')\n\n      //add circle layer here  \n      map.addLayer({\n        id: `${addSourceName}-point`,\n        type: 'circle',\n        source: addSourceName,\n        minzoom: 14,\n        paint: {\n          // increase the radius of the circle as the zoom level and dbh value increases\n          'circle-radius': {\n            property: propertyLayer,\n            type: typeLayer,\n            stops: [\n              [{ zoom: 15, value: 1 }, 5],\n              [{ zoom: 15, value: 62 }, 10],\n              [{ zoom: 22, value: 1 }, 20],\n              [{ zoom: 22, value: 62 }, 50],\n            ]\n          },\n          'circle-color': {\n            property: propertyLayer,\n            type: typeLayer,\n            stops: [\n              [0, colorSeven],\n              [10, colorSix],\n              [20, colorFive],\n              [30, colorFour],\n              [40, colorThree],\n              [50, colorTwo],\n              [60, colorOne]\n            ]\n          },\n          'circle-stroke-color': 'white',\n          'circle-stroke-width': 1,\n          'circle-opacity': {\n            stops: [\n              [14, 0],\n              [15, 1]\n            ]\n          }\n        }\n      }, 'waterway-label');\n      \n      map.on('click', `${addSourceName}-point`, function(e) {\n        new mapboxgl.Popup()\n          .setLngLat(e.features[0].geometry.coordinates)\n          .setHTML(`\n          <div className=\"popup__container\" style=\"background-image: url(${backgroundImgPopUp});\">\n            ${htmlPopUp}\n          </div>\n          `)\n          // .setHTML('<br><b>Diameter:</b> ' + e.features[0].properties.dbh)\n          .addTo(map);\n      });\n\n    })\n  \n  })\n\n  return(\n    <div style={{ width: `${withContainer}%`, height: `${heigthContainer}vh` }} id={container}>\n\n    </div>\n  )\n\n}\n\nexport default heatMap"]},"metadata":{},"sourceType":"module"}